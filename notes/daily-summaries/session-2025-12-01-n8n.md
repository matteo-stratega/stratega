# Session Report - 1 Dicembre 2025 - n8n MCP Setup

## Stato Attuale

### MCP Config Aggiornata
File: `~/.claude/claude_desktop_config.json`

```json
{
  "mcpServers": {
    "notion": { ... },
    "n8n-mcp": {
      "command": "npx",
      "args": [
        "-y",
        "supergateway",
        "--streamableHttp",
        "https://n8n.pickeat.cc/mcp-server/http",
        "--header",
        "authorization:Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
      ]
    }
  }
}
```

**Status:** Config pronta, richiede restart Claude Code per attivare.

---

## Errore Workflow da Fixare

**Workflow:** `content-gen-CLAUDE-COMPLETE`
**URL:** https://n8n.pickeat.cc/workflow/gQxLO22JXLBPc4Hp

**Errore:** Nodo "Information Extractor" fallisce con:
```
Failed to parse. Text: ```json { "Headline": "Systematic B2B Lead..."
```

**Causa:** Il modello AI restituisce JSON wrappato in markdown backticks (` ```json ... ``` `) invece di JSON puro.

**Fix:** Aggiungere al system prompt del nodo AI che genera l'output:
```
IMPORTANT: Return ONLY raw JSON. No markdown formatting, no ```json blocks, no backticks.
```

---

## Prossimi Step (quando riapri)

1. **Verifica MCP attivo** - dopo restart, dovrei avere accesso diretto a n8n
2. **Fix Information Extractor** - modificare prompt per output JSON puro
3. **Test workflow** - eseguire e verificare articolo generato

---

## Comandi Utili

```bash
# Test MCP connection (dopo restart)
# Claude dovrebbe avere tool mcp__n8n-mcp__*

# Workflow URL
https://n8n.pickeat.cc/workflow/gQxLO22JXLBPc4Hp
```

---

*Archimede - Session paused for Claude restart*
